{"version":3,"sources":["components/Persons.js","components/AddNew.js","components/Filter.js","services/api.js","App.js","index.js"],"names":["Number","person","deleteThis","name","number","onClick","Persons","persons","filterStr","filter","toLowerCase","includes","map","i","key","AddNew","addName","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","value","onChange","type","Filter","handleFilterChange","baseUrl","axios","get","then","response","data","newObject","post","id","put","delete","App","useState","setPersons","setNewName","setNewNumber","setFilterStr","errorMsg","setErrorMsg","useEffect","Service","setMessage","message","time","setTimeout","updatePersons","className","event","preventDefault","some","x","window","confirm","nameToAdd","catch","error","concat","target","newNumberm","ReactDOM","render","document","getElementById"],"mappings":"2OAmBMA,EAAS,SAAC,GAA0B,IAAzBC,EAAwB,EAAxBA,OAAQC,EAAgB,EAAhBA,WACrB,OACI,4BACI,4BAAKD,EAAOE,MACZ,4BAAKF,EAAOG,QACZ,4BACI,4BAAQC,QAASH,EAAWD,IAA5B,aAODK,EA9BC,SAAC,GAAsC,IAArCC,EAAoC,EAApCA,QAASC,EAA2B,EAA3BA,UAAWN,EAAgB,EAAhBA,WAQlC,OACI,+BACI,+BAPAK,EAAQE,OAAO,SAAAR,GAAM,OAAIA,EAAOE,KAAKO,cAAcC,SAASH,EAAUE,iBAAgBE,IAAI,SAACX,EAAQY,GAAT,OAAe,kBAAC,EAAD,CAAQC,IAAKD,EAAGZ,OAAQA,EAAQC,WAAYA,SCelJa,EAlBA,SAAC,GAAyE,IAAxEC,EAAuE,EAAvEA,QAASC,EAA8D,EAA9DA,QAASC,EAAqD,EAArDA,iBAAkBC,EAAmC,EAAnCA,UAAWC,EAAwB,EAAxBA,mBAC5D,OACI,6BACI,0BAAMC,SAAUL,GACZ,sCACM,2BAAOM,MAAOL,EAASM,SAAUL,KAEvC,wCACQ,2BAAOI,MAAOH,EAAWI,SAAUH,KAE3C,6BACA,4BAAQI,KAAK,UAAb,WCFDC,EATA,SAAC,GAAqC,IAApCjB,EAAmC,EAAnCA,UAAWkB,EAAwB,EAAxBA,mBACxB,OACI,uCAEI,2BAAOJ,MAAOd,EAAWe,SAAUG,M,gBCLzCC,EAAU,eAsBD,EApBA,WAEb,OADgBC,IAAMC,IAAIF,GACXG,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAkB5B,EAfA,SAAAC,GAEb,OADgBL,IAAMM,KAAKP,EAASM,GACrBH,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAa5B,EAVA,SAACG,EAAIF,GAElB,OADgBL,IAAMQ,IAAN,UAAaT,EAAb,YAAwBQ,GAAMF,GAC/BH,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QAQ5B,EALA,SAACG,GAEd,OADgBP,IAAMS,OAAN,UAAgBV,EAAhB,YAA2BQ,IAC5BL,KAAK,SAAAC,GAAQ,OAAIA,EAASC,QCoI5BM,EAlJH,WAAO,IAAD,EACcC,mBAAS,IADvB,mBACThC,EADS,KACAiC,EADA,OAEcD,mBAAS,IAFvB,mBAETtB,EAFS,KAEAwB,EAFA,OAGkBF,mBAAS,IAH3B,mBAGTpB,EAHS,KAGEuB,EAHF,OAIkBH,mBAAS,IAJ3B,mBAIT/B,EAJS,KAIEmC,EAJF,OAKgBJ,mBAAS,MALzB,mBAKTK,EALS,KAKCC,EALD,KAOhBC,oBAAU,WACRC,IAEGjB,KAAK,SAAAC,GACJS,EAAWT,MAEd,IAEH,IAYMiB,EAAY,SAACC,GAAuB,IAAdC,EAAa,uDAAN,EACjCL,EAAYI,GACZE,WAAW,WACTN,EAAY,OACL,IAALK,IAeAE,EAAgB,WACpBL,IAEGjB,KAAK,SAAAC,GACJS,EAAWT,GACXU,EAAW,IACXC,EAAa,OAmEnB,OACE,6BACE,yCACA,kBA3GY,WACd,OAAiB,OAAbE,EACK,KAGL,yBAAKS,UAAU,SACZT,IAqGL,MACA,uCACA,kBAAC,EAAD,CACE5B,QAlDU,SAACsC,GAEf,GADAA,EAAMC,iBACDhD,EAAQiD,KAAK,SAAAC,GAAC,OAAIA,EAAEtD,OAASc,KAkBhC,GAAGyC,OAAOC,QAAP,UAAkB1C,EAAlB,uEAAgG,CACjG,IAAM2C,EAAY,CAChBzD,KAAMc,EACNb,OAAQe,GAEJgB,EACJ5B,EAAQE,OAAO,SAAAR,GAAM,OAAIA,EAAOE,OAASc,IAAS,GAAGkB,GAEvDY,EACUZ,EAAIyB,GACX9B,KAAK,SAAAC,GACJqB,IACAJ,EAAW,GAAD,OAAI/B,EAAJ,eAEX4C,MAAM,SAAAC,GACLV,IACAJ,EAAWc,EAAM/B,SAASC,KAAK8B,eA7BrCf,EAJkB,CAChB5C,KAAMc,EACNb,OAAQe,IAIPW,KAAK,SAAAC,GACJS,EAAWjC,EAAQwD,OAAOhC,IAC1BU,EAAW,IACXC,EAAa,IACbM,EAAW,GAAD,OAAI/B,EAAJ,aAEX4C,MAAM,SAAAC,GACLd,EAAWc,EAAM/B,SAASC,KAAK8B,UAmCjC7C,QAASA,EACTC,iBA7FmB,SAACoC,GACxBb,EAAWa,EAAMU,OAAO1C,QA6FpB2C,WAAY9C,EACZC,mBA3FqB,SAACkC,GAC1BZ,EAAaY,EAAMU,OAAO1C,UA4FxB,uCACA,kBAAC,EAAD,CACEd,UAAWA,EACXkB,mBA5FqB,SAAC4B,GAC1BX,EAAaW,EAAMU,OAAO1C,UA6FxB,kBAAC,EAAD,CACEf,QAASA,EACTC,UAAWA,EACXN,WAnFa,SAACD,GAAD,OAAY,WACzByD,OAAOC,QAAP,0CAAkD1D,EAAOE,QAC3D4C,EACQ9C,EAAOkC,IACdL,KAAK,SAAAC,GACJgB,IAEGjB,KAAK,SAAAC,GACJS,EAAWT,GACXiB,EAAW,GAAD,OAAI/C,EAAOE,KAAX,YAA2B,OAG1C0D,MAAM,SAAAC,GACLV,IACAJ,EAAW,GAAD,OAAI/C,EAAOE,KAAX,sDCvElB+D,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,W","file":"static/js/main.33ec4cb8.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Persons = ({persons, filterStr, deleteThis}) => {\r\n    const allNumbers = () => {\r\n        return(\r\n            persons.filter(person => person.name.toLowerCase().includes(filterStr.toLowerCase())).map((person, i) => <Number key={i} person={person} deleteThis={deleteThis}/>)\r\n        )\r\n        \r\n    }\r\n    \r\n    return (\r\n        <table>\r\n            <tbody>\r\n                {allNumbers()}\r\n            </tbody>\r\n        </table>\r\n    )\r\n}\r\n\r\nconst Number = ({person, deleteThis}) => {\r\n    return(\r\n        <tr>\r\n            <th>{person.name}</th>\r\n            <th>{person.number}</th>\r\n            <th>\r\n                <button onClick={deleteThis(person)}>Delete</button>\r\n            </th>\r\n        </tr>\r\n    )\r\n}\r\n\r\n\r\nexport default Persons\r\n\r\n","import React from 'react'\r\n\r\nconst AddNew = ({addName, newName, handleNameChange, newNumber, handleNumberChange}) => {\r\n    return (\r\n        <div>\r\n            <form onSubmit={addName}>\r\n                <div>\r\n                name: <input value={newName} onChange={handleNameChange}  />\r\n                </div>\r\n                <div>\r\n                number: <input value={newNumber} onChange={handleNumberChange}  />\r\n                </div>\r\n                <div>\r\n                <button type=\"submit\">add</button>\r\n                </div>\r\n            </form>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default AddNew\r\n","import React from 'react'\r\n\r\nconst Filter = ({filterStr, handleFilterChange}) => {\r\n    return (\r\n        <div>\r\n            Filter:\r\n            <input value={filterStr} onChange={handleFilterChange}></input>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Filter\r\n","import axios from 'axios'\r\nconst baseUrl = '/api/persons'\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl)  \r\n  return request.then(response => response.data)\r\n} \r\n\r\nconst create = newObject => {\r\n  const request = axios.post(baseUrl, newObject)\r\n  return request.then(response => response.data)  \r\n} \r\n\r\nconst update = (id, newObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, newObject)  \r\n  return request.then(response => response.data)  \r\n}\r\n\r\nconst remove = (id) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`)\r\n  return request.then(response => response.data)\r\n}\r\n  \r\nexport default { getAll, create, update, remove }","import React, { useState, useEffect } from 'react'\r\nimport Persons from './components/Persons'\r\nimport AddNew from './components/AddNew'\r\nimport Filter from './components/Filter'\r\nimport Service from './services/api'\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([])\r\n  const [newName, setNewName] = useState('')\r\n  const [newNumber, setNewNumber] = useState('')\r\n  const [filterStr, setFilterStr] = useState('') \r\n  const [errorMsg, setErrorMsg] = useState(null)\r\n\r\n  useEffect(() => {\r\n    Service\r\n      .getAll()\r\n      .then(response => {\r\n        setPersons(response)\r\n      })\r\n  }, []) \r\n\r\n  const Message = () => {\r\n    if (errorMsg === null) {\r\n      return null\r\n    } else {\r\n      return (\r\n        <div className=\"error\">\r\n          {errorMsg}\r\n        </div>\r\n      )\r\n    }\r\n  }\r\n\r\n  const setMessage= (message, time = 3) => {\r\n    setErrorMsg(message)\r\n    setTimeout(() => {\r\n      setErrorMsg(null)\r\n    }, (time*1000))\r\n  }\r\n\r\n  const handleNameChange = (event) => {\r\n    setNewName(event.target.value)\r\n  }\r\n\r\n  const handleNumberChange = (event) => {\r\n    setNewNumber(event.target.value)\r\n  }\r\n\r\n  const handleFilterChange = (event) => {\r\n    setFilterStr(event.target.value)\r\n  }\r\n\r\n  const updatePersons = () => {\r\n    Service\r\n      .getAll()\r\n      .then(response => {\r\n        setPersons(response)\r\n        setNewName('')\r\n        setNewNumber('')\r\n      })\r\n  }\r\n\r\n  const deleteThis = (person) => () =>{\r\n    if (window.confirm(`Are you sure you want to delete ${person.name}`)) {\r\n      Service\r\n      .remove(person.id)\r\n      .then(response => {\r\n        Service\r\n          .getAll()\r\n          .then(response => {\r\n            setPersons(response)\r\n            setMessage(`${person.name} deleted`, 3)\r\n          })\r\n      })\r\n      .catch(error => {\r\n        updatePersons()\r\n        setMessage(`${person.name} has been already removed from the server`)\r\n      })\r\n    }\r\n  }\r\n\r\n  const addName = (event) => {\r\n    event.preventDefault()\r\n    if (!persons.some(x => x.name === newName)) {\r\n      const nameToAdd = {\r\n        name: newName,\r\n        number: newNumber\r\n      }\r\n      Service\r\n        .create(nameToAdd)\r\n        .then(response => {\r\n          setPersons(persons.concat(response))\r\n          setNewName('')\r\n          setNewNumber('')\r\n          setMessage(`${newName} added`)\r\n        })\r\n        .catch(error => {\r\n          setMessage(error.response.data.error)\r\n        })\r\n\r\n    } else  {\r\n      if(window.confirm(`${newName} is already added to phonebook. Do you want to replace the number?`)) {\r\n        const nameToAdd = {\r\n          name: newName,\r\n          number: newNumber\r\n        }\r\n        const id = (\r\n          persons.filter(person => person.name === newName)[0].id\r\n        )\r\n        Service\r\n          .update(id, nameToAdd)\r\n          .then(response => {\r\n            updatePersons()\r\n            setMessage(`${newName} updated`)\r\n          })\r\n          .catch(error => {\r\n            updatePersons()\r\n            setMessage(error.response.data.error)\r\n          })\r\n      }\r\n    }\r\n    \r\n\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <h1>Phonebook</h1>\r\n      <Message/>\r\n      <h3>Add new</h3>\r\n      <AddNew\r\n        addName={addName}\r\n        newName={newName}\r\n        handleNameChange={handleNameChange}\r\n        newNumberm={newNumber}\r\n        handleNumberChange={handleNumberChange}\r\n      />\r\n      <h3>Numbers</h3>\r\n      <Filter \r\n        filterStr={filterStr} \r\n        handleFilterChange={handleFilterChange}\r\n      />\r\n      <Persons \r\n        persons={persons} \r\n        filterStr={filterStr}\r\n        deleteThis={deleteThis}\r\n      />\r\n    </div>\r\n  )\r\n\r\n}\r\n\r\nexport default App","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n"],"sourceRoot":""}